[tool.pytest.ini_options]
# All projects use src/ layout
pythonpath = ["src"]

# All tests live under tests/
testpaths = ["tests"]

# Async projects are common in your stack
asyncio_mode = "auto"

# Global pytest options
addopts = [
  "-v",
  "-ra",
  "--strict-config",
  "--strict-markers",
  "--tb=short",
  "--showlocals",
  "--import-mode=importlib",

  # Time & perf
  "--timeout=10",
  "--durations=10",

  # Coverage: target the real package
  # REPLACE <project-package-path> with e.g. "src/jules_cli" or "src/pypurge"
  "--cov=<project-package-path>",
  "--cov-report=term-missing:skip-covered",
  "--cov-report=html",
  "--cov-report=xml",
  "--cov-fail-under=90",
]

log_cli = true
log_cli_level = "INFO"

[tool.coverage.run]
branch = true
# Same path as in --cov above
source = ["<project-package-path>"]

[tool.coverage.report]
fail_under = 90
show_missing = true
skip_covered = true